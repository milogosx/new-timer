.app {
  max-width: 430px;
  margin: 0 auto;
  position: relative;
  overflow-x: hidden;
  /* Single source of truth for viewport height */
  height: 100vh;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  /* Safe area padding — INSIDE the height thanks to border-box */
  padding-top: max(env(safe-area-inset-top), var(--space-6));
  padding-bottom: max(env(safe-area-inset-bottom), var(--space-6));
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  box-sizing: border-box;
  background: var(--surface-base);
}

/* Smooth screen entrance */
.app > * {
  animation: screenFadeIn 0.25s ease-out;
}

@keyframes screenFadeIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* PWA standalone mode — let the app use full screen width.
   Uses BOTH CSS media query (Android) and JS-set .is-pwa class (iOS fallback)
   because display-mode: standalone is unreliable on iOS Safari. */
@media all and (display-mode: standalone) {
  .app {
    max-width: 100%;
    padding-left: max(env(safe-area-inset-left), var(--space-4));
    padding-right: max(env(safe-area-inset-right), var(--space-4));
  }
}

@media all and (display-mode: fullscreen) {
  .app {
    max-width: 100%;
    padding-left: max(env(safe-area-inset-left), var(--space-4));
    padding-right: max(env(safe-area-inset-right), var(--space-4));
  }
}

/* JS-based fallback: html.is-pwa is set via navigator.standalone (iOS) */
.is-pwa .app {
  max-width: 100%;
  padding-left: max(env(safe-area-inset-left), var(--space-4));
  padding-right: max(env(safe-area-inset-right), var(--space-4));
}
